# compiler flags for C++
#PKG_CXXFLAGS = -std=c++11
# NOTE: -std=c++11 does not work on Ubuntu 12.04 LTS.
PKG_CXXFLAGS = -std=c++0x `"$(R_HOME)/bin/Rscript" -e "Rcpp:::CxxFlags()"`

# options for lex and yacc
LEX = flex
YACC = bison
LYPREFIX = pr
LEX_YACC_DIR = lex_yacc

all: $(SHLIB) period_scanner.o period_parser.o

# rules for lex and yacc
period_scanner.cpp : $(LEX_YACC_DIR)/period_scanner.l
	$(LEX)  -P$(LYPREFIX) -o$@ $<

period_parser.cpp : $(LEX_YACC_DIR)/period_parser.yy
	$(YACC) --defines=period_parser.h -p $(LYPREFIX) -o $@ $<

# dependencies C files
period_parser.o : period_parser.cpp period_scanner.h parse_period.h
period_scanner.o : period_scanner.cpp period_parser.cpp period_scanner.h \
                   months.h
months.o : months.h
parse_period.o : parse_period.h
period_range.o : period_range.h
aggr_gr.o : period_range.h
window_regts.o : period_range.h
